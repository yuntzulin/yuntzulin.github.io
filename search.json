[{"title":"test for theme","url":"/2024/02/14/test-for-theme/","content":"---\ntitle: 0CTF 2023 筆記\ndate: 2023-12-11 13:40:00\ncatalog: true\ntags: [Security]\ncategories: [Security]\nphotos: /img/0ctf-2023-writeup/cover.png\n---\n\n今年的 0CTF 一共有三道 web 題，其中一道題目是 client-side 的，我就只解這題而已，順利拿到 first blood，這篇簡單記錄一下心得。\n\n關鍵字列表：\n\n1. CSS injection\n2. CSS exfiltration\n\n<!-- more -->\n\n## Web - newdiary (14 solves)\n\n題目就是個典型的 note app，可以建立筆記然後回報給 admin bot，筆記只有限制長度，並沒有做過濾，在 client 也是直接用 innerHTML，所以很明顯有 HTML injection：\n\n``` js\nload = () => {\n    document.getElementById(\"title\").innerHTML = \"\"\n    document.getElementById(\"content\").innerHTML = \"\"\n    const param = new URLSearchParams(location.hash.slice(1));\n    const id = param.get('id');\n    let username = param.get('username');\n    if (id && /^[0-9a-f]+$/.test(id)) {\n        if (username === null) {\n            fetch(`/share/read/${id}`).then(data => data.json()).then(data => {\n                const title = document.createElement('p');\n                title.innerText = data.title;\n                document.getElementById(\"title\").appendChild(title);\n        \n                const content = document.createElement('p');\n                content.innerHTML = data.content;\n                document.getElementById(\"content\").appendC"},{"title":"Hello World","url":"/2024/02/14/hello-world/","content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n"}]